name: Build
on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      # Check out GitHub reportiory
      - uses: actions/checkout@v2

      # Build the Docker image
      - name: Build container image
        run: |
          DOCKER_BUILDKIT=1 docker build \
          --tag jamiecaldwell/uh-crw:latest \
          --cache-from jamiecaldwell/uh-crw:latest
          --build-arg BUILDKIT_INLINE_CACHE=1 .

      # # Login to DockerHub
      # - name: Login to DockerHub
      #   uses: docker/login-action@v1
      #   with:
      #     username: jamiecaldwell
      #     password: ${{ secrets.DOCKER_PASSWORD }}

      # # Push the image to DockerHub
      # - name: Push container image
      #   run: docker push jamiecaldwell/uh-crw:latest
